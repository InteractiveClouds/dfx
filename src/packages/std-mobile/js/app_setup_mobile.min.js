angular.element(document).ready(function () {
    $.root_ = $("body");
    DreamFace.getMenu("main", function (b) {
        //console.log(b);
        var html;
        b.definition.forEach(function (e) {
            var _id = Math.floor(1e5 * Math.random());
            html = '<li id="' + _id + '">' +
            '<span class="media-object pull-left icon icon-' + e.icon_class + '">' +
            '</span>' +
            '<a href="' + e.action + '" data-ignore="push">' + e.label + '</a>' +
            '</li>'
            $('> ul', '#mobile-menu').append(html);
        });
        $('nav a[href="Home.html"]').click();
    });
    dfxMobileActivateMainMenu();
});

var dfxMobileActivateMainMenu = function() {
    var $mobile_menu = $('#mobile-menu');
    $mobile_menu.css('left', '-' + $mobile_menu.innerWidth() + 'px');
    $('#main-menu-opener').on('click', function() {
        console.log('main-menu-opener.click');
        var $mobile_menu_shade = $('.mobile-menu-shade');
        if ($mobile_menu.hasClass('collapsed')) {
            $mobile_menu.animate({"left":"0px"}, "slow").removeClass('collapsed');
            $mobile_menu_shade.css('display', 'block');
        } else {
            $mobile_menu.animate({"left": '-' + $mobile_menu.innerWidth() + 'px'}, "slow").addClass('collapsed');
            $mobile_menu_shade.css('display', 'none');
        }
    });
};
